# Global Agent Config
[agent]
  interval = "10s"          # collect every 10s
  round_interval = true
  metric_batch_size = 1000
  metric_buffer_limit = 10000
  collection_jitter = "0s"
  flush_interval = "10s"
  flush_jitter = "0s"
  precision = ""
  hostname = ""
  omit_hostname = false

###############################################################################
#                              INPUT PLUGINS                                  #
###############################################################################

# -------- System Metrics --------
[[inputs.cpu]]
  percpu = true
  totalcpu = true
  collect_cpu_time = false
  report_active = true

[[inputs.mem]]

[[inputs.disk]]
  ignore_fs = ["tmpfs", "devtmpfs", "overlay"]

[[inputs.diskio]]

[[inputs.net]]

[[inputs.system]]

# -------- Django App Metrics via Prometheus Exporter --------
[[inputs.prometheus]]
  urls = ["http://20.171.9.112:8000/metrics"]   # Django app metrics
  metric_version = 2


###############################################################################
#                              OUTPUT PLUGINS                                 #
###############################################################################

# Send metrics to InfluxDB
[[outputs.influxdb_v2]]
  urls = ["http://34.67.150.144:8086"]     # InfluxDB URL
  token = "HVqpjfP11LEYe8xcrqjIxCYoDZaxHnA7ITevx4Y8w7d4iRkNUS23NJ5icV5elFQh5RtAP4zhUPokEpIC6x5rAg=="
  organization = "admin"
  bucket = "telegraf"


[[inputs.procstat]]
  exe = "python3"   # or "python3" if running Django via manage.py runserver



# -------------- mysql database metrics --------------------

[[inputs.mysql]]
  servers = ["root:password@tcp(127.0.0.1:3306)/"]    

  # Replace root:password with your MySQL username and password
  # If your MySQL is running on another VM, replace 127.0.0.1 with its IP

  # Collect extra metrics like performance_schema
  perf_events_statements_digest_text_limit = 120
  perf_events_statements_limit = 250
  gather_process_list = true
  gather_slave_status = true
